<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script src="/cdn-cgi/apps/head/3cOPSgo5Omz84ycX7CvigfX4cpw.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-82213539-2"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-82213539-2');
    </script>
    <title>5 Implementation Details 5.0.0</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        Cache Plugin
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../guide/index.html" class="button">Table of contents</a>

                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/usage.html"><strong>2</strong><span>Usage</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/cacheTags.html"><strong>3</strong><span>Caching Tags</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/grailsCacheAdminService.html"><strong>4</strong><span>The Cache Admin Service</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/implementation.html"><strong>5</strong><span>Implementation Details</span></a>
                        </div>
                        
                    </div>
                </div>
            </li>
            <li class="separator selected">
                <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
            </li>
        </ul>
    </div>


</div>

<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/grailsCacheAdminService.html">&lt;&lt; <strong>4</strong><span>The Cache Admin Service</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                


                <div class="project">
                    <h1>5 Implementation Details</h1>

                    <p><strong>Version:</strong> 5.0.0</p>
                </div>

                

                

<h1 id="implementation">5 Implementation Details</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-plugins/grails-cache/edit/master/src/main/docs/guide/implementation.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>All of the plugin&#8217;s classes are designed for extensibility; the classes are all public, and fields and methods are mostly public or protected. Consider subclassing existing classes to reuse as much as possible instead of completely rewriting them.</p>
</div>
<div class="sect1">
<h2 id="_cache_manager">Cache manager</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The core cache plugin registers a <code>grailsCacheManager</code> Spring bean, and the extension plugins replace this bean with one that creates and manages caches for that implementation. The default implementation is an instance of <a href="../api/grails/plugin/cache/GrailsConcurrentMapCacheManager.html">GrailsConcurrentMapCacheManager</a> which uses <a href="../api/grails/plugin/cache/GrailsConcurrentMapCache.html">GrailsConcurrentMapCache</a> as its cache implementation. It uses a <code>java.util.concurrent.ConcurrentHashMap</code> to store cached values.</p>
</div>
<div class="paragraph">
<p>You can customize the cache manager by replacing the <code>grailsCacheManager</code> Spring bean in <code>resources.groovy</code> with your own; either subclass <a href="../api/grails/plugin/cache/GrailsConcurrentMapCacheManager.html">GrailsConcurrentMapCacheManager</a> (e.g. to override the <code>createConcurrentMapCache()</code> method) or by implementing the <a href="../api/org/grails/plugin/cache/GrailsCacheManager.html">GrailsCacheManager</a> interface.</p>
</div>
<div class="sect2">
<h3 id="_fragment_caching">Fragment caching</h3>
<div class="paragraph">
<p>You can cache partial GSP page sections with the <code>&lt;cache:block&gt;</code> tag. You can specify a key when using this tag but it&#8217;s in general unnecessary. This is because the block will be rendered with its own Closure, and the default key is the full closure class name. This is unique since the closures aren&#8217;t re-used; for example these two blocks will be cached independently, even in the same GSP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">&lt;<span class="key">cache</span>:block&gt;
foo
&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">cache:block&gt;</span></span><span class="error">
</span>
&lt;<span class="key">cache</span>:block&gt;
bar
&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">cache:block&gt;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can cache the content of templates with the <code>&lt;cache:render&gt;</code> tag. You can specify a key when using this tag but like the <code>block</code> tag, it&#8217;s in general unnecessary because the default key is the full template class name.</p>
</div>
</div>
<div class="sect2">
<h3 id="_service_caching">Service caching</h3>
<div class="paragraph">
<p>You can cache the return value of a service method by annotating it with <a href="../api/grails/plugin/cache/Cacheable.html">Cacheable</a>.</p>
</div>
<div class="sect3">
<h4 id="_key_generation">Key generation</h4>
<div class="paragraph">
<p>The default key generated implements the <a href="../api/grails/plugin/cache/GrailsCacheKeyGenerator.html">GrailsCacheKeyGenerator</a> which provides method for generating keys taking into account:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The class name</p>
</li>
<li>
<p>The method name</p>
</li>
<li>
<p>A hashCode for the current object</p>
</li>
<li>
<p>The parameters or if a closure is specified to generate the key the value of the closure call</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can override this implementation by defining a bean called <code>customCacheKeyGenerator</code> via Spring.</p>
</div>
</div>
</div>
</div>
</div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/grailsCacheAdminService.html">&lt;&lt; <strong>4</strong><span>The Cache Admin Service</span></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tags</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Tags/block.html">block</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/render.html">render</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
